<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="Assets/styles.css">
  <title>Webbed | FYP-25-S2-12</title>
  <link rel="icon" href="Assets/logo/logo16x16.png" type="image/png">
</head>
<body>
  <button id="popout-btn" title="Pop out to a new window" aria-label="Pop out">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
        viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="feather feather-external-link">
      <path d="M18 3h3v3"></path>
      <path d="M21 3l-9 9"></path>
      <path d="M15 3h-4a2 2 0 0 0-2 2v4"></path>
      <path d="M3 21h18"></path>
    </svg>
</button>
  <div class="tab-nav">
    <button class="nav-tab active" id="scan-tab-btn">Scan</button>
    <button class="nav-tab" id="settings-tab-btn">Settings</button>
    <button class="nav-tab" id="sites-tab-btn">Websites</button>
  </div>

  <!-- Scan Tab -->
  <div id="scan-tab">
    <h2>Website Scan</h2>

    <button id="scan-button" title="Perform a Scan on current website" >Scan</button>

    <div id="scan-container">
      <div id="progress-container">
        <div id="progress-bar"></div>
      </div>
      <p id="scan-status-msg" style="color: black; margin-top: 5px; display: none;"></p>
      <p id="status-text">Waiting to scan...</p>
      <p id="scan-result"></p>
      <p id="vuln-count" style="margin-top: 0.3em; font-weight: bold;"></p>
      <ol id="detailed-results"></ol>

      <!-- Download Log Button (hidden until after scan) -->
      <button id="download-log" style="display: none; margin-top: 1em;">
        Download Scan Log
      </button>
      <br></br>
      <div id="classification-buttons">
        <button id="whitelistBtn" class="action-button">Add to Whitelist</button>
        <button id="blacklistBtn" class="action-button">Add to Blacklist</button>
      </div>
    </div>

    <div id="credits-banner">
      <span>Webbed</span>
      <img src="Assets/logo/logo16x16.png">
      <br>
      <span>Client-Side Script Security Inspector</span>
      <br>
      <span>FYP-25-S2-12</span>
    </div>

  </div>

  <!-- Settings Tab -->
  <div id="settings-tab" class="section" style="display: none;">

    <div class="setting-item">
      <span>Dark Mode</span>
      <label class="switch">
        <input type="checkbox" id="dark-mode-toggle">
        <span class="slider"></span>
      </label>
    </div>

    <div class="setting-item">
      <span>Advanced Scan</span>
      <label class="switch">
        <input type="checkbox">
        <span class="slider"></span>
      </label>
    </div>

    <!-- JS Blocker on/off switch -->
    <div class="setting-item" style="margin-top:1em;">
      <span>JS Blocker</span>
      <label class="switch">
        <input type="checkbox" id="toggle-js-blocker">
        <span class="slider"></span>
      </label>
    </div>

    <div id="blocker-status" style="margin-top:1em;">
      Status: <span id="blocker-status-text">Loadingâ€¦</span>
    </div>

    <div id="credits-banner">
      <span>Webbed</span>
      <img src="Assets/logo/logo16x16.png">
      <br>
      <span>Client-Side Script Security Inspector</span>
      <br>
      <span>FYP-25-S2-12</span>
    </div>

  </div>

  <!-- Websites Tab -->
  <div id="sites-section" class="section" style="display: none;">
    <h1>Manage Websites</h1>
    <button id="reset-lists">Reset Lists</button>
    <div class="tab-nav">
      <button class="nav-tab active" id="whitelist-tab-btn">Trusted</button>
      <button class="nav-tab" id="blacklist-tab-btn">Untrusted</button>
    </div>
    
    <div id="whitelist-tab" style="display: block;" class="list-box">
      <input type="text" id="whitelist-filter" placeholder="Filter whitelist..." style="width: 100%; margin-bottom: 5px;">
      <button id="whitelist-sort" data-order="asc" style="margin-bottom:5px;">Sort Asc</button>
      <table id="whitelist">
        <thead>
          <tr><th>Whitelist</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="blacklist-tab" style="display: none;" class="list-box">
      <input type="text" id="blacklist-filter" placeholder="Filter blacklist..." style="width: 100%; margin-bottom: 5px;">
      <button id="blacklist-sort" data-order="asc" style="margin-bottom:5px;">Sort Asc</button>
      <table id="blacklist">
        <thead>
          <tr><th>Blacklist</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="credits-banner">
      <span>Webbed</span>
      <img src="Assets/logo/logo16x16.png">
      <br>
      <span>Client-Side Script Security Inspector</span>
      <br>
      <span>FYP-25-S2-12</span>
    </div>

  </div>

  <script src="index.js"></script>
  <script src="lists.js"></script> <!-- for list funcitonality -->

</body>
</html>